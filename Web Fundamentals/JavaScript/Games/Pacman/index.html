<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Demo</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="board"></div>

    <script>

        var world = [
            [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
            [2, 3, 1, 1, 1, 1, 1, 1, 1, 2],
            [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
            [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
            [2, 1, 1, 1, 2, 1, 1, 1, 1, 2],
            [2, 1, 1, 1, 2, 2, 1, 2, 1, 2],
            [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
            [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
            [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
            [2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
        ];

        function displayWorld() {
            var output = '';
            for (var i = 0; i < world.length; i++) {
                output += "<div class='row'>";
                for (var j = 0; j < world[i].length; j++) {
                    if (world[i][j] == 2) {
                        output += "<div class='brick'></div>"
                    }
                    else if (world[i][j] == 1) {
                        output += "<div class='coin'></div>"
                    }
                    if (world[i][j] == 0) {
                        output += "<div class='empty'></div>"
                    }
                    if (world[i][j] == 3) {
                        output += "<div id='pacman'></div>"
                    }
                }
                output += "</div>"
            }
            // console.log(output)
            // document.querySelector("#board").innerHTML = output;
            document.getElementById('board').innerHTML = output;
            // document.getElementsByClassName('coin')
        }
        displayWorld()

        var onTheMove = false;

        var p_x = 1;
        var p_y = 1;

        document.onkeyup = function (e) {
            onTheMove = false;
        }

        document.onkeydown = function (e) {

            switch (e.keyCode) {
                case 87:
                    onTheMove = true;
                    moveUp();
                    break;
                case 83:
                    onTheMove = true;
                    moveDown();
                    break;
                case 65:
                    onTheMove = true;
                    moveLeft();
                    break;
                case 68:
                    onTheMove = true;
                    moveRight();
                    break;
            }
            // console.log(e.keyCode);
        }
        setInterval(() => {
            displayWorld();
            findPacMan();
        }, 10);


        function findPacMan() {
            for (let y = 0; y < world.length; y++) {
                for (let x = 0; x < world[y].length; x++) {
                    if (world[y][x] == 3) {
                        p_x = x;
                        p_y = y;
                    }
                }
            }
        }

        function moveRight() {
            if (world[p_y][p_x + 1] !== 2) {
                // Move Right Function
                world[p_y][p_x] = 0; // Sitting Here , Change to Zero!
                world[p_y][p_x + 1] = 3; // Change next block to PacMan
            }
        }
        function moveLeft() {
            if (world[p_y][p_x - 1] !== 2) {
                // Move Right Function
                world[p_y][p_x] = 0; // Sitting Here , Change to Zero!
                world[p_y][p_x - 1] = 3; // Change next block to PacMan
            }
        }
        function moveUp() {
            if (world[p_y - 1][p_x] !== 2) {
                // Move Right Function
                world[p_y][p_x] = 0; // Sitting Here , Change to Zero!
                world[p_y - 1][p_x] = 3; // Change next block to PacMan
            }
        }
        function moveDown() {
            if (world[p_y + 1][p_x] !== 2) {
                // Move Right Function
                world[p_y][p_x] = 0; // Sitting Here , Change to Zero!
                world[p_y + 1][p_x] = 3; // Change next block to PacMan
            }
        }

        // function moveRight() {
        //     for (let i = 0; i < world.length; i++) {
        //         for (let j = 0; j < world[i].length; j++) {
        //             if (world[i][j] == 3) {
        //                 if (world[i][j + 1] == 2 || onTheMove == false) {
        //                     world[i][j] = 3
        //                 } else {
        //                     world[i][j + 1] = 3;
        //                     world[i][j] = 0
        //                 }
        //             }
        //         }
        //     }
        // }



    </script>

</body>

</html>